<style>
     .font1{
        font-family: Montserrat;
font-size: 20px;
font-weight: 600;
line-height: 24.38px;
color: #244035!important;


    }
    .sfont::placeholder{
        color: #244035!important;
    }
    .page-link.active{
        background-color: #244035;
    }
    .p-body{
        background-color: #84c55cab;

    }

    #autocomplete-list {
            position: absolute;
            border: 1px solid #d4d4d4;
            border-bottom: none;
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
        }

        #autocomplete-list div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff;
            border-bottom: 1px solid #d4d4d4;
        }

        #autocomplete-list div:hover {
            background-color: #e9e9e9;
        }
</style>

<div class="container mt-15 mb-15">
    <div class="row mb-5">

    </div>
    <div class="row ">
        <div class="col-3">
            <!--begin::Search-->
            <div class="d-flex align-items-center position-relative my-1 ">
                <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                <span class="svg-icon svg-icon-1 position-absolute ms-6 ">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
                        <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor" />
                    </svg>
                </span>
                <!--end::Svg Icon-->
                <input id="search_project" type="text" data-kt-user-table-filter="search" class="sfont p-body form-control  w-250px ps-14" placeholder="Rechercher un projet..."/>
                <div id="autocomplete-list"></div>

            </div>
   
            <!--end::Search-->
        </div>
        <div class="col-2 ">
             <!--begin::Filter-->
           
             <div class="d-flex align-items-center position-relative my-1 ">
                <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                <span class="svg-icon svg-icon-1 position-absolute ms-6 ">
                    <svg heigh="24" width="24" fill="#000000" height="200px" width="200px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 297 297" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M148.5,0C87.43,0,37.747,49.703,37.747,110.797c0,91.026,99.729,179.905,103.976,183.645 c1.936,1.705,4.356,2.559,6.777,2.559c2.421,0,4.841-0.853,6.778-2.559c4.245-3.739,103.975-92.618,103.975-183.645 C259.253,49.703,209.57,0,148.5,0z M148.5,272.689c-22.049-21.366-90.243-93.029-90.243-161.892 c0-49.784,40.483-90.287,90.243-90.287s90.243,40.503,90.243,90.287C238.743,179.659,170.549,251.322,148.5,272.689z"></path> <path d="M148.5,59.183c-28.273,0-51.274,23.154-51.274,51.614c0,28.461,23.001,51.614,51.274,51.614 c28.273,0,51.274-23.153,51.274-51.614C199.774,82.337,176.773,59.183,148.5,59.183z M148.5,141.901 c-16.964,0-30.765-13.953-30.765-31.104c0-17.15,13.801-31.104,30.765-31.104c16.964,0,30.765,13.953,30.765,31.104 C179.265,127.948,165.464,141.901,148.5,141.901z"></path> </g> </g></svg>
                    
                </span>
                <!--end::Svg Icon-->
                
                <select id="region" class="form-select p-body form-control   ps-14" data-kt-select2="true" data-placeholder="Region" data-allow-clear="true" data-kt-user-table-filter="role" data-hide-search="true">
                    <option></option>
                    <%data.regions.forEach(elt=>{%>
                    <option value="<%=elt%>"  <%if(data.current_region==elt){%>selected<%}%> ><%=elt%></option>
                    <%})%>
                </select>
            </div>
                
         
           
              
                <!--end::Filter-->
        </div>
        <div class="col-2 ">
            <!--begin::Filter-->
            <div class="d-flex align-items-center position-relative my-1 ">
                <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                <span class="svg-icon svg-icon-1 position-absolute ms-6 ">
                    <svg width="24" height="24" viewBox="0 0 16 16" xmlns:osb="http://www.openswatchbook.org/uri/2009/osb" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" id="svg6190" version="1.1" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><metadata id="metadata6196"><rdf:rdf><cc:work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title><dc:date>2021</dc:date><dc:creator><cc:agent><dc:title>Timothée Giet</dc:title></cc:agent></dc:creator><cc:license rdf:resource="http://creativecommons.org/licenses/by-sa/4.0/"></cc:license></cc:work><cc:license rdf:about="http://creativecommons.org/licenses/by-sa/4.0/"><cc:permits rdf:resource="http://creativecommons.org/ns#Reproduction"></cc:permits><cc:permits rdf:resource="http://creativecommons.org/ns#Distribution"></cc:permits><cc:requires rdf:resource="http://creativecommons.org/ns#Notice"></cc:requires><cc:requires rdf:resource="http://creativecommons.org/ns#Attribution"></cc:requires><cc:permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks"></cc:permits><cc:requires rdf:resource="http://creativecommons.org/ns#ShareAlike"></cc:requires></cc:license></rdf:rdf></metadata><defs id="defs6194"><linearGradient gradientTransform="translate(-4 4)" osb:paint="solid" id="linearGradient1163"><stop id="stop1161" offset="0" style="stop-color:#d2d2d2;stop-opacity:1"></stop></linearGradient></defs><path id="path1641" d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm0 2a6 6 0 0 1 6 6 6 6 0 0 1-6 6 6 6 0 0 1-6-6 6 6 0 0 1 6-6z" style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291"></path><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5" width="2" height="14.370387" x="7" y="-15" transform="rotate(90)"></rect><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5-3" width="2" height="14.370387" x="9.7678213" y="-4.1643934" transform="rotate(30)"></rect><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5-3-6" width="2" height="14.370387" x="1.7678211" y="3.6504133" transform="rotate(-30)"></rect></g></svg>
                   
                </span>
                <!--end::Svg Icon-->
                
                <select id="sector" class="form-select p-body form-control   ps-14" data-kt-select2="true" data-placeholder="Secteur" data-allow-clear="true" data-kt-user-table-filter="role" data-hide-search="true">
                    <option></option>
                    <%data.sectors.forEach(elt=>{%>
                        <option value="<%=elt%>"     <%if(data.current_sector==elt){%>selected<%}%> ><%=elt%></option>
                        <%})%>
                </select>
            </div>
               
              
        
          
             
               <!--end::Filter-->
       </div>
       <div class="col-2 ">
        <!--begin::Filter-->
      
        <div class="d-flex align-items-center position-relative my-1 ">
            <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
            <span class="svg-icon svg-icon-1 position-absolute ms-6 ">
                <svg width="24" height="24" viewBox="0 0 16 16" xmlns:osb="http://www.openswatchbook.org/uri/2009/osb" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" id="svg6190" version="1.1" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><metadata id="metadata6196"><rdf:rdf><cc:work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title><dc:date>2021</dc:date><dc:creator><cc:agent><dc:title>Timothée Giet</dc:title></cc:agent></dc:creator><cc:license rdf:resource="http://creativecommons.org/licenses/by-sa/4.0/"></cc:license></cc:work><cc:license rdf:about="http://creativecommons.org/licenses/by-sa/4.0/"><cc:permits rdf:resource="http://creativecommons.org/ns#Reproduction"></cc:permits><cc:permits rdf:resource="http://creativecommons.org/ns#Distribution"></cc:permits><cc:requires rdf:resource="http://creativecommons.org/ns#Notice"></cc:requires><cc:requires rdf:resource="http://creativecommons.org/ns#Attribution"></cc:requires><cc:permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks"></cc:permits><cc:requires rdf:resource="http://creativecommons.org/ns#ShareAlike"></cc:requires></cc:license></rdf:rdf></metadata><defs id="defs6194"><linearGradient gradientTransform="translate(-4 4)" osb:paint="solid" id="linearGradient1163"><stop id="stop1161" offset="0" style="stop-color:#d2d2d2;stop-opacity:1"></stop></linearGradient></defs><path id="path1641" d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm0 2a6 6 0 0 1 6 6 6 6 0 0 1-6 6 6 6 0 0 1-6-6 6 6 0 0 1 6-6z" style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291"></path><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5" width="2" height="14.370387" x="7" y="-15" transform="rotate(90)"></rect><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5-3" width="2" height="14.370387" x="9.7678213" y="-4.1643934" transform="rotate(30)"></rect><rect style="opacity:1;vector-effect:none;fill:#373737;fill-opacity:1;stroke:none;stroke-width:4.45366764;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:3.20000005;stroke-opacity:.55063291" id="rect1152-3-5-3-6" width="2" height="14.370387" x="1.7678211" y="3.6504133" transform="rotate(-30)"></rect></g></svg>
            </span>
            <!--end::Svg Icon-->
            
            <select id="status" class="form-select p-body form-control   ps-14" data-kt-select2="true" data-placeholder="Statut" data-allow-clear="true" data-kt-user-table-filter="role" data-hide-search="true">
                <option ></option>
                <%data.autor.forEach(elt=>{%>
                    <option value="<%=elt%>" <%if(data.current_status==elt){%>selected<%}%> > <%=elt%></option>
                    <%})%>
            </select>
        </div>
         
           <!--end::Filter-->
   </div>
        <div class="col-3 mt-3">
            <span class="font1 "><%=data.total_pro%> projet(s) trouvé(s)</span>
        </div>
    </div>
    <script>
        
    </script>
    <%
    console.log(data.error)

    function image_sp(type){
        let def = 'assets/media/auth/bg5.jpg'
        switch (type) {
            case 'Hospitality':
            def = 'assets/media/auth/bg5.jpg'
                break;
        }


        return def
    }
    if(data.error==false){%>
        <div class="container-fluid">
            <div class="row mt-5 mb-5">
                <%data.data.forEach(elt=>{%>
              
        
        
                <div class="col-lg-4 col-12 d-flex mt-1 mb-4 justify-content-center">
                    <a href="/projet/<%=elt.programmeId%>">
                    <div class="card shadow-sm mt-2 mb-2 card-pro" style="width: 266px;height: 300px">
                        <div class="card-body" style="height: 40%;" >
                            <div class="symbol-group symbol-hover">
                                <!--begin::User--> 
                                <%elt.company.forEach(elts=>{%>
                <div class="symbol symbol-35px symbol-circle" data-bs-toggle="tooltip" aria-label="Francis Mitcham" data-bs-original-title="Francis Mitcham" data-kt-initialized="1">
                                                <img alt="Pic" src="<%=elts.logo%>">
                                        </div>
                                <%})%>
                <!--begin::User-->
                        </div>
        
                        <% status = elt.sector;  switch(status) { 
                            case 'pending': %>
                              <p>Your order is pending.</p>
                              <% break; 
                           
                            default: %>
                            <svg style="
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            z-index: -1; 
                            opacity: 0.2;"version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 504.32 504.32" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g transform="translate(1 1)"> <path style="fill:#80D6FA;" d="M248.6,4.12c136.533,0,247.467,110.933,247.467,247.467S385.133,499.054,248.6,499.054 c-34.133,0-66.56-6.827-96.427-19.627c22.187-17.067,36.693-43.52,36.693-74.24c0-36.693-20.48-68.267-51.2-83.627V80.92 c0-16.213-9.387-30.72-23.04-37.547C153.027,18.627,199.107,4.12,248.6,4.12"></path> <path style="fill:#50DD8E;" d="M262.254,406.894c8.533,8.533,17.067,25.6,8.533,34.133c-8.533,8.533-25.6,8.533-34.133,0 C224.707,429.08,253.72,398.36,262.254,406.894z M421.827,268.654c17.067,17.067-17.067,25.6-25.6,51.2s-42.667,25.6-51.2,17.067 c-8.533-8.533-25.6-17.067-42.667-25.6c-17.067-8.533,0-25.6,17.067-17.067c17.067,8.533,23.893-25.6,42.667-25.6 C370.627,268.654,404.76,251.587,421.827,268.654z M311.747,11.8l33.28,11.093c70.827,29.013,124.587,89.6,145.067,164.693 c-31.573,13.653-81.92,19.627-93.867,13.653c-17.067-8.533-17.067-51.2-46.933-52.907c-11.947-0.853-25.6,51.2-42.667,59.733 c-17.067,8.533-25.6-25.6-42.667-51.2s25.6-51.2,42.667-51.2c17.067,0,17.067-42.667,17.067-51.2S306.627,35.694,311.747,11.8z M217.027,353.987c0,0-8.533,8.533-34.133,8.533l-1.707,0.853c-9.387-17.92-23.893-32.427-40.96-41.813V191.854 c25.6,0,34.987,3.413,34.987,3.413c9.387,4.267,16.213,12.8,16.213,26.453c0,42.667-5.973,34.133-14.507,59.733 c-8.533,25.6,29.867,29.013,40.107,34.133C225.56,319.854,234.094,336.92,217.027,353.987z"></path> <path style="fill:#E4F2DE;" d="M140.227,80.92v42.667H54.893V80.92c0-23.893,18.773-42.667,42.667-42.667 c9.387,0,17.92,2.56,24.747,7.68C133.4,53.614,140.227,66.414,140.227,80.92"></path> <path style="fill:#FF7474;" d="M54.893,277.187v-51.2v-51.2v-51.2h85.333v68.267V321.56c17.92,9.387,32.427,23.893,40.96,41.813 c6.827,12.8,10.24,26.453,10.24,41.813c0,26.453-11.093,50.347-29.013,67.413c-17.067,16.213-39.253,26.453-64.853,26.453 c-52.053,0-93.867-41.813-93.867-93.867c0-36.693,20.48-68.267,51.2-83.627V277.187z"></path> </g> <path style="fill:#51565F;" d="M252.16,504.32c-40.107,0-60.587-8.533-61.44-8.533c-2.56-0.853-3.413-3.413-2.56-5.973 c0.853-2.56,3.413-3.413,5.973-2.56c0,0,19.627,8.533,58.027,8.533c133.973,0,243.2-109.227,243.2-243.2 c0-11.093-0.853-22.187-2.56-33.28c0-2.56,1.707-4.267,3.413-5.12c2.56,0,4.267,1.707,5.12,3.413 c1.707,11.093,2.56,23.04,2.56,34.987C503.894,391.68,391.254,504.32,252.16,504.32z M98.56,504.32 c-53.76,0-98.133-44.373-98.133-98.133c0-35.84,19.627-69.12,51.2-86.187V124.587c0-2.56,1.707-4.267,4.267-4.267h51.2 c2.56,0,4.267,1.707,4.267,4.267c0,2.56-1.707,4.267-4.267,4.267H60.16v42.667h12.8c2.56,0,4.267,1.707,4.267,4.267 s-1.707,4.267-4.267,4.267h-12.8v42.667h12.8c2.56,0,4.267,1.707,4.267,4.267c0,2.56-1.707,4.267-4.267,4.267h-12.8v42.667h12.8 c2.56,0,4.267,1.707,4.267,4.267c0,2.56-1.707,4.267-4.267,4.267h-12.8v40.107c0,1.707-0.853,3.413-2.56,3.413 c-29.867,15.36-48.64,46.08-48.64,79.36c0,49.493,40.107,89.6,89.6,89.6s89.6-40.107,89.6-89.6c0-34.133-18.773-64-48.64-79.36 c-1.707-0.853-2.56-2.56-2.56-3.413V81.92c0-21.333-17.067-38.4-38.4-38.4s-38.4,17.067-38.4,38.4v8.533 c0,2.56-1.707,4.267-4.267,4.267c-2.56,0-4.267-1.707-4.267-4.267V81.92c0-25.6,21.333-46.933,46.933-46.933 s46.933,21.333,46.933,46.933V320c31.573,17.067,51.2,50.347,51.2,86.187C196.693,459.947,152.32,504.32,98.56,504.32z M98.56,453.12c-2.56,0-4.267-1.707-4.267-4.267s1.707-4.267,4.267-4.267c21.333,0,38.4-17.067,38.4-38.4 c0-2.56,1.707-4.267,4.267-4.267c2.56,0,4.267,1.707,4.267,4.267C145.493,431.787,124.16,453.12,98.56,453.12z M254.72,452.267 c-7.68,0-15.36-2.56-20.48-7.68c-8.533-8.533-2.56-23.893,7.68-33.28c3.413-3.413,7.68-6.827,11.093-7.68 c6.827-2.56,11.093,0,12.8,1.707c10.24,10.24,19.627,29.013,8.533,40.107C270.08,449.707,262.4,452.267,254.72,452.267z M259.84,410.454c-1.707,0-5.973,1.707-11.093,6.827c-4.267,4.267-6.827,8.533-8.533,12.8s-0.853,6.827,0.853,8.533 c6.827,6.827,21.333,6.827,28.16,0c5.973-5.973-0.853-20.48-8.533-28.16H259.84z M218.027,359.254c-0.853,0-2.56,0-3.413-0.853 c-1.707-1.707-1.707-4.267,0-5.973c8.533-8.533,9.387-15.36,8.533-20.48c-0.853-5.973-4.267-9.387-7.68-11.093 c-1.707-0.853-5.973-1.707-9.387-3.413c-11.093-3.413-26.453-7.68-32.427-18.773c-2.56-5.12-2.56-11.093-0.853-17.92 c2.56-8.533,5.12-13.653,7.68-17.92c4.267-7.68,6.827-12.8,6.827-40.96c0-13.653-7.68-19.627-13.653-22.187 c-2.56-0.853-3.413-3.413-1.707-5.973c0.853-2.56,3.413-3.413,5.973-1.707c11.947,5.973,18.773,16.213,18.773,29.867 c0,29.867-3.413,35.84-7.68,45.227c-1.707,4.267-4.267,8.533-6.827,16.213c-1.707,4.267-1.707,7.68,0,11.093 c4.267,7.68,17.067,11.093,27.307,14.507c4.267,1.707,8.533,2.56,11.093,3.413c5.973,3.413,10.24,9.387,11.947,17.067 c1.707,9.387-2.56,19.627-11.093,28.16C220.587,359.254,218.88,359.254,218.027,359.254z M363.094,347.307 c-8.533,0-16.213-2.56-20.48-5.973c-7.68-7.68-24.747-16.213-41.813-24.747c-4.267-1.707-6.827-5.12-8.533-7.68 c-1.707-3.413-1.707-6.827,0-10.24c4.267-7.68,17.067-12.8,29.013-6.827c5.12,2.56,9.387-0.853,16.213-9.387 c5.973-7.68,13.653-16.213,24.747-16.213c1.707,0,5.12-0.853,9.387-2.56c14.507-4.267,39.253-11.093,53.76,3.413 c4.267,4.267,5.973,8.533,5.973,12.8c0,7.68-5.973,12.8-12.8,19.627c-6.827,5.973-14.507,13.653-17.067,23.04 c-4.267,11.947-13.653,20.48-27.307,23.893C370.773,347.307,366.507,347.307,363.094,347.307z M311.04,296.96 c-5.12,0-8.533,2.56-10.24,5.12c-0.853,0.853-0.853,1.707,0,2.56c0.853,1.707,2.56,2.56,4.267,3.413 c17.92,8.533,34.987,17.067,43.52,26.453c3.413,3.413,13.653,5.12,23.04,2.56c5.973-1.707,17.067-5.973,21.333-17.92 c4.267-11.947,12.8-20.48,19.627-26.453c5.12-5.12,10.24-10.24,10.24-13.653c0-1.707-0.853-4.267-3.413-5.973 c-11.093-11.093-31.573-5.12-45.227-1.707c-5.12,1.707-9.387,2.56-11.947,2.56c-6.827,0-11.947,5.973-17.92,12.8 c-6.827,7.68-14.507,17.92-26.453,11.947C316.16,297.814,313.6,296.96,311.04,296.96z M301.654,214.187 c-11.947,0-19.627-15.36-27.307-31.573c-4.267-7.68-8.533-16.213-12.8-23.04c-5.973-8.533-5.973-18.773-0.853-28.16 c9.387-17.067,34.987-29.867,46.933-29.867c5.973,0,12.8-11.947,12.8-46.933c0-1.707-1.707-4.267-3.413-7.68 c-4.267-6.827-10.24-17.067-8.533-31.573c-17.92-4.267-36.693-6.827-55.467-6.827c-34.987,0-69.12,7.68-100.693,22.187 c-2.56,0.853-4.267,0-5.973-1.707c-0.853-2.56,0-4.267,1.707-5.973C181.334,7.68,216.32,0,252.16,0c21.333,0,41.813,2.56,61.44,7.68 c2.56,0.853,3.413,2.56,3.413,5.12c-3.413,13.653,2.56,22.187,6.827,29.867c2.56,4.267,5.12,7.68,5.12,11.947 c0,36.693-6.827,55.467-21.333,55.467c-10.24,0-32.427,11.093-40.107,25.6c-3.413,6.827-3.413,12.8,0.853,19.627 c5.12,7.68,9.387,16.213,13.653,23.893c10.24,20.48,16.213,29.013,23.893,25.6c7.68-3.413,15.36-19.627,21.333-31.573 c7.68-16.213,14.507-28.16,23.04-28.16l0,0c20.48,0.853,29.013,18.773,35.84,33.28c4.267,8.533,7.68,17.067,13.653,19.627 c9.387,5.12,54.613,0,87.04-11.947C466.347,115.2,413.44,56.32,345.174,28.16c-2.56-0.853-3.413-3.413-2.56-5.973 c0.853-2.56,3.413-3.413,5.973-2.56c72.533,29.867,127.147,92.16,147.627,167.253v0.853c0,0.853,0,0.853,0,1.707 c0,0.853-0.853,0.853-0.853,1.707L494.507,192c-31.573,13.653-83.627,20.48-97.28,13.653c-8.533-4.267-12.8-13.653-17.067-23.893 c-5.973-13.653-12.8-27.307-28.16-28.16c-3.413,0-11.093,15.36-15.36,23.893c-7.68,15.36-15.36,30.72-25.6,35.84 C306.773,213.334,304.214,214.187,301.654,214.187z"></path> </g></svg>
                          <% } %>
                        </div>
                        <div class="card-body" style="height: 10%;">
                            <span class="" style="font-size: 13px; font-weight: 800; font-family: 'Montserrat', sans-serif;">
                                <%=elt.title%>
                             </span> <br>
                        </div>
                        <div class="card-body" style="height: 50%;">
                           
        
                            <span class="text-grey" style="font-size: 10px; font-weight: 500; font-family: 'Montserrat', sans-serif;">
                                <%=elt.serialNo%> 
                            </span><br>
                            <div>
                                <span class="badge badge-secondary"><%=elt.sector%></span>  
                            </div>
        
                            <span class="text-black" style="font-size: 12px; font-weight: 500; font-family: 'Montserrat', sans-serif;">
                                HNE Atténuations estimés : <b><%=elt.creditEst+" "+elt.creditUnit%></b> 
                            </span><br>
                        </div>
                    </div>
                    </a>
                </div>
                <%})%>
            </div>
            <div class="row mt-5 mb-5">
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <%if(data.reference>1){%>
                      <li class="page-item"><a class="page-link" href="?page=<%=data.reference-1%><%=more%>">Précedent</a></li>
                      <%}%>
                      <%for (let i = 1; i <= data.page; i++) {
                            if(i===data.reference){%>
                                <li class="page-item"><a class="page-link active" href="#"><%=i%></a></li>
                          <%  }else{%>
                                <li class="page-item"><a class="page-link" href="?page=<%=i%><%=more%>"><%=i%></a></li>
                          <%  }
                        }
                        %>
                      
                   
                      <%if(data.reference< data.page ){%>
                      <li class="page-item"><a class="page-link" href="?page=<%=data.reference+1%><%=more%>">Suivant</a></li>
                      <%}%>
                    </ul>
                  </nav>
            </div>
        </div>
  
    <%}else{%>
        <div class="row mt-5 mb-5 text-center d-flex justify-content-center fs-2">
            Il semble avoir eu une erreur lors du chargement de donnée veuillez recommencer
        </div>
    <%}%>
</div>

<script>

document.addEventListener("DOMContentLoaded", function() {
          
            let project = []
                    fetch(`/api/search_project`,{method:"POST"})
                    .then(response => response.json())
                    .then(data => {
                       
                        if(!data.error){
                            console.log(data)
                            project = data.search
                        }
                     
                        
                    })
                    .catch(error => console.error( error));
            

            console.log(project)
            const input = document.getElementById("search_project");
            const list = document.getElementById("autocomplete-list");

            input.addEventListener("input", function() {
                const query = this.value.toLowerCase();
                list.innerHTML = "";
                
                if (!query) return;
                
                project.forEach(language => {
                    if (language.label.toLowerCase().includes(query)) {
                        const item = document.createElement("div");
                        item.innerHTML = `<a href="${language.url}" target="_blank">${language.label}</a>`;
                        item.addEventListener("click", function() {
                            input.value = language.label;
                            document.location=language.url
                            list.innerHTML = "";
                        });
                        list.appendChild(item);
                    }
                });
            });
          
           



            document.addEventListener("click", function(e) {
                if (e.target !== input) {
                    list.innerHTML = "";
                }
            });


        });
</script>
